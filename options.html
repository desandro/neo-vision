<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Neo-vision options</title>

  <style media="screen">
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: -webkit-box;
      -webkit-box-orient: horizontal;
    }
    
    #options {
      background: white;
      color: #333;
      padding: 10px;
      margin: 10px;
      border-radius: 10px;
      -webkit-box-shadow: 0 2px 5px hsla( 0, 0%, 0%, 0.3 );
    }
    
    #examples {
      padding: 10px;
    }
    
    textarea {
    }
    
    input[type="submit"] {
      font-size: 40px;
    }
    
    h1 {
      margin: 0 0 10px;
    }
    
    #style-text {
      display: block;
      -webkit-appearance: textarea;
      border: 1px solid #CCC;
      -webkit-user-select: text;
      resize: both;
      -webkit-resize: both;
      padding: 2px;
      white-space: pre-wrap;
      word-wrap: break-word;
      width: 540px;
      height: 400px;
      font-size: 12px;
      font-family: monospace;
      overflow: auto;
      line-height: 1.45em;
    }
    
    hr {
      border: none;
      border-top: 1px solid hsla( 0, 0%, 0%, 0.2 );
      border-bottom: 1px solid hsla( 0, 0%, 100%, 0.2 );
    }
  </style>
  
<style id="default-theme" media="none">.str { color: #080 }  /* string content */
.kwd { color: #008 }  /* a keyword */
.com { color: #800 }  /* a comment */
.typ { color: #606 }  /* a type name */
.lit { color: #066 }  /* a literal value */
/* punctuation, lisp open bracket, lisp close bracket */
.pun, .opn, .clo { color: #660 }
.tag { color: #008 }  /* a markup tag name */
.atn { color: #606 }  /* a markup attribute name */
.atv { color: #080 }  /* a markup attribute value */
.dec, .var { color: #606 }  /* a declaration; a variable name */
.fun { color: red }  /* a function name */

/* Specify class=linenums on a pre to get line numbering */
ol.linenums { margin-top: 0; margin-bottom: 0 } /* IE indents via margin-left */
li.L0, li.L1, li.L2, li.L3, li.L5, li.L6, li.L7, li.L8 { list-style-type: none }
/* Alternate shading for lines */
li.L1, li.L3, li.L5, li.L7, li.L9 { background: #eee }
</style>

<style id="sunburst-theme" media="none">/* Pretty printing styles. Used with prettify.js. */
/* Vim sunburst theme by David Leibovic */
body { background-color: #000; }
.str { color: #65B042; } /* string  - green */
.kwd { color: #E28964; } /* keyword - dark pink */
.com { color: #AEAEAE; font-style: italic; } /* comment - gray */
.typ { color: #89bdff; } /* type - light blue */
.lit { color: #3387CC; } /* literal - blue */
.pun { color: #fff; } /* punctuation - white */
.pln { color: #fff; } /* plaintext - white */
.tag { color: #89bdff; } /* html/xml tag    - light blue */
.atn { color: #bdb76b; } /* html/xml attribute name  - khaki */
.atv { color: #65B042; } /* html/xml attribute value - green */
.dec { color: #3387CC; } /* decimal - blue */
</style>

<style id="sunburst-dd-theme" media="none">body { background: #000; color: white; }
pre { line-height: 1.45em; }
.str { color: #65B042; } /* string */
.kwd { color: #E28964; } /* keyword */
.com { color: #444; font-style: italic; }  /* comment */
.typ { color: #89bdff; } /* type */
.lit { color: #3387CC; }
.pun { color: #EDC; }
.pln { color: #EEE; }
.tag { color: #89bdff; }
.atn { color: #bdb76b; }
.atv { color: #65B042; }
.dec { color: #3387CC; }
ol.linenums { margin-top: 0; margin-bottom: 0; }
</style>
  
<style id="desert-theme" media="none">/* desert scheme ported from vim to google prettify */
body { background-color: #333 }
pre .nocode { background-color: none; color: #000 }
pre .str { color: #ffa0a0 } /* string  - pink */
pre .kwd { color: #f0e68c; font-weight: bold }
pre .com { color: #87ceeb } /* comment - skyblue */
pre .typ { color: #98fb98 } /* type    - lightgreen */
pre .lit { color: #cd5c5c } /* literal - darkred */
pre .pun { color: #fff }    /* punctuation */
pre .pln { color: #fff }    /* plaintext */
pre .tag { color: #f0e68c; font-weight: bold } /* html/xml tag    - lightyellow */
pre .atn { color: #bdb76b; font-weight: bold } /* attribute name  - khaki */
pre .atv { color: #ffa0a0 } /* attribute value - pink */
pre .dec { color: #98fb98 } /* decimal         - lightgreen */

/* Specify class=linenums on a pre to get line numbering */
ol.linenums { margin-top: 0; margin-bottom: 0; color: #AEAEAE } /* IE indents via margin-left */
li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8 { list-style-type: none }
/* Alternate shading for lines */
li.L1,li.L3,li.L5,li.L7,li.L9 { }
</style>
  
</head>
<body>


  <div id="options">
    <h1>Neo-vision options</h1>

    <form>
      <p>
        <label for="themes">Use theme: </label>
        <select id="themes">
          <option></option>
          <option value="default">default</option>
          <option value="sunburst">sunburst</option>
          <option value="sunburst-dd">sunburst-dd</option>
          <option value="desert">desert</option>
        </select>
      </p>
      <h2>Theme CSS</h2>
      <p><style id="style-text" contenteditable></style></p>
      <p class="has-buttons">
        <input type="submit" id="save-button" value="Save Theme" />
      </p>
    </form>
  </div>



  <div id="examples">
    <pre class="example prettyprint lang-js">// JavaScript example
function helloWorld(world) {
  for (var i = 42; --i >= 0;) {
    alert('Hello ' + String(world));
  }
}</pre>
    <hr />
    <pre class="example prettyprint lang-css">/* CSS example */
.bar { color: hsl( 0, 100%, 50% ); }
#foo { color: pink; }
b { color: blue; }
u { color: "umber"; }</pre>
    <hr />
    <pre id="saved-css" class="prettyprint lang-css"></pre>
  </div>
  
  <script src="prettify.js"></script>
  <script src="lang-css.js"></script>
  <script>
    // options page only
    
    var bgPage = chrome.extension.getBackgroundPage();

    window.onload = function() {

      var styleText = document.getElementById('style-text'),
          savedCssElem = document.getElementById('saved-css'),
          defaultThemeStyle = document.getElementById('default-theme').textContent;

      // set text to last style
      if ( localStorage['neoVisionStyle'] ) {
        styleText.textContent = localStorage['neoVisionStyle'];
        saveStyle( localStorage['neoVisionStyle'] );
      } else {
        styleText.textContent = defaultThemeStyle
      }
      styleText.textContent = localStorage['neoVisionStyle'] || defaultThemeStyle;

      prettyPrint();

      // remove prettyprint class
      var prettyPrinted = document.querySelectorAll('.example.prettyprint');
      for (var i=0, len = prettyPrinted.length; i < len; i++) {
        prettyPrinted[i].classList.remove('prettyprint');
      }

      function saveStyle( style ) {
        savedCssElem.innerHTML = '/**** saved Neo-vision style ****/ <br />' + style;
        prettyPrint();
        // bgPage.storeStyle( style );
        localStorage['neoVisionStyle'] = style;
      }

      // save theme when form is submitted
      document.getElementsByTagName('form')[0].addEventListener( 'submit', function(event) {
        saveStyle( styleText.textContent )
        event.preventDefault();
      }, false);

      // change theme when select is changed
      document.getElementById('themes').addEventListener( 'change', function(event) {
        if ( !event.target.value.length ) {
          return;
        }
        // get content of matching <style id="value-theme" />
        var style = document.getElementById( event.target.value + '-theme').textContent;
        styleText.textContent = style;
      }, false);

    };
  </script>

</body>
</html>